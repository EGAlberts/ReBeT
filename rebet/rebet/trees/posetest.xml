<root BTCPP_format="4">
  <BehaviorTree ID="Untitled">
  	
	<Sequence>
		<Script code="pic_rate:=5; task_weight:=1.0; task_metric:=1.0; power_weight=1.0; power_metric:=1.0"/>
		<PowerQR weight="{power_weight}" metric="{power_metric}" objs_identified="{objects_detected}"  in_odom="{odometry}" in_picture_rate="{id_picture_rate}" mean_metric="{power_mean_metric}">
			<Sequence>
					<filterObstacles service_name="/map_server/map" obstacle_positions="{route_poses}" obstacle_number="{num_obstacles}"/>
					<initialPose topic_name="initialpose"/>
					<Repeat num_cycles="3">
						<Repeat num_cycles="{num_obstacles}">
							<Sequence>
							<SafetyQR>
							<AdaptMaxSpeed adaptation_options="0.08;0.16;0.26" adaptation_strategy="ucb_strategy" adaptation_subject="max_velocity" subject_location="velocity_smoother">
								<RetryUntilSuccessful num_attempts="-1">
										<visitObs poses="{route_poses}"/>
								</RetryUntilSuccessful>
							</AdaptMaxSpeed>
							</SafetyQR>
								<TaskEfficiencyQR weight="{task_weight}" objs_identified="{objects_detected}" metric="{task_metric}" mean_metric="{task_mean_metric}" >
								<AdaptPictureRate adaptation_options="1;5;7" adaptation_strategy="ucb_strategy" adaptation_subject="pic_rate" subject_location="n/a">
									<Repeat num_cycles="{pic_rate}">
										<Sequence>
												<RetryUntilSuccessful num_attempts="-1">
													<CameraFeed latest_image="{image_feed}" topic_name="/camera/image_raw"/>
												</RetryUntilSuccessful>
												<identifyObject in_camera_image="{image_feed}" objs_identified="{objects_detected}"/>
										</Sequence>
									</Repeat>
								</AdaptPictureRate>
								</TaskEfficiencyQR>
							</Sequence>
						</Repeat>
					</Repeat>
			</Sequence>
		</PowerQR>
	</Sequence>
  </BehaviorTree>
</root>
